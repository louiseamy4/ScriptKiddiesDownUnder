{% extends 'base.html' %}

{% block main %}
<div class="center">
    <h1>Token Swap</h1>
    <h4>These transaction details are correct as at {{timestamp}}, prices are subject to change.</h4>
    <form id="contract-form" method="POST" action="/execute">
        <div class="inputbox">
            <label id="network" for="network">Your network:</label>
            <select name="network">
              {% for key,value in networks.items() %}
                {% if key == network %}
                  <option value="{{key}}" selected>{{key}}</option>
                {% else %}
                  <option value="{{key}}">{{key}}</option>
                {% endif %}
              {% endfor %}
            </select>
        </div>
        <p>Your Wallet Address</p>
        <div class="inputbox">
          <input value="{{user_address}}" type="text" class="form-control" name="userAddress" id="userAddress" required="true" readonly>
        </div>
        <p>Your Wallet Private Key</p>
        <div class="inputbox">
          <input value="{{priv_key}}" type="text" class="form-control" name="privKey" id="privKey" required="true" readonly>
        </div>
        <div class="inputbox">
          <label id="ogToken" for="ogToken">Original Token:</label>
          <select name="ogToken">
            {% for key,value in tokens.items() %}
              {% if key == original_token %}
                <option value="{{key}}" selected>{{key}}</option>
              {% else %}
                <option value="{{key}}">{{key}}</option>
              {% endif %}
            {% endfor %}
          </select>
        </div>
        <p>Amount of Original Token</p>
        <div class="inputbox">
            <input value="{{original_amount}}" type="text" class="form-control" name="ogAmount" id="ogAmount" required="true" readonly>
        </div>
        <div class="inputbox">
          <label id="targetToken" for="targetToken">Target Token:</label>
          <select name="targetToken">
            {% for key,value in tokens.items() %}
            {% if key == target_token %}
              <option value="{{key}}" selected>{{key}}</option>
            {% else %}
              <option value="{{key}}">{{key}}</option>
            {% endif %}
          {% endfor %}
          </select>
        </div>
        <p>Amount of Target Token</p> 
        <div class="inputbox">
          <input value="{{target_amount}}" type="text" class="form-control" name="targetAmount" id="targetAmount" required="true" readonly>  
        </div>
        <div class="inputbox">
          <button id="approve_swap" type="submit" class="btn btn-primary">Approve</button>
        </div>
        <div class="inputbox">
            <button id="decline_swap" type="submit" class="btn btn-primary">Decline</button>
          </div>
        <div class="inputbox">
          <a href="/">Back to swap page</a>
        </div>
        <p>{{message}}</p>
        <p>{{form_params}}</p>
      </form>
  </div>
{% endblock %}

{% block script %}
{% endblock %}